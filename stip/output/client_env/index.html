<!DOCTYPE html>
<html>
	<head>
		<title>Uni-corn</title>
		<meta charset="UTF-8">
		<script src="js/jquery-2.2.1.min.js"></script>
		<script src="js/rpc.js"></script>
		<script src="js/rpc-data.js"></script>
		<script src="js/ractive-0.7.3.js"></script>
		<script src="js/watch.js"></script>
		<script src="js/objspy.js"></script>
		<script src="js/esprima-syntax.js"></script>
		<script src="js/redstone.js"></script>
		<script>REDSTONE.CRUMBS = {"rmEz87OzvXTKFx3JlLHV8Zxa7d7HrU8Wd":{"idName":"rmEz87OzvXTKFx3JlLHV8Zxa7d7HrU8Wd","variableNames":["tasks"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"tasks","isInCrumb":true}}],"sourceType":"script"}},"rFATu8QeBh79W6HV66Cyll6ebFThbbaOh":{"idName":"rFATu8QeBh79W6HV66Cyll6ebFThbbaOh","variableNames":["taskTitle"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"taskTitle","isInCrumb":true}}],"sourceType":"script"},"defaultValue":""},"rRBnrNlajjgK9h8VjugIakPyx42k5RpSd":{"idName":"rRBnrNlajjgK9h8VjugIakPyx42k5RpSd","variableNames":["taskPriority"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"taskPriority","isInCrumb":true}}],"sourceType":"script"},"defaultValue":""},"rzFtE5rawHlFPsCAxKYqoYONpbtmKispQ":{"idName":"rzFtE5rawHlFPsCAxKYqoYONpbtmKispQ","variableNames":["meetings"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"meetings","isInCrumb":true}}],"sourceType":"script"}},"rswAsNvE5EVsT8QZVqiF8pjP7snrwXXor":{"idName":"rswAsNvE5EVsT8QZVqiF8pjP7snrwXXor","variableNames":["meetingTitle"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"meetingTitle","isInCrumb":true}}],"sourceType":"script"},"defaultValue":""},"rVgSYugsT7rDGQ98WlqevHmGn2fKZtQoI":{"idName":"rVgSYugsT7rDGQ98WlqevHmGn2fKZtQoI","variableNames":["meetingDate"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"meetingDate","isInCrumb":true}}],"sourceType":"script"},"defaultValue":""},"rbyXwYr75M6GqDhw8er1wiRzrsZsr1Up8":{"idName":"rbyXwYr75M6GqDhw8er1wiRzrsZsr1Up8","variableNames":["meetingNotes"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"meetingNotes","isInCrumb":true}}],"sourceType":"script"},"defaultValue":""},"rjBdgwQPIjOwyn0pjeBAa8Th6RPYRityX":{"idName":"rjBdgwQPIjOwyn0pjeBAa8Th6RPYRityX","variableNames":["activityToday"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"activityToday","isInCrumb":true}}],"sourceType":"script"}},"rh2vSxzmN8iUWniIox9FBpykilqf95iGJ":{"idName":"rh2vSxzmN8iUWniIox9FBpykilqf95iGJ","variableNames":["activityToday"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"activityToday","isInCrumb":true}}],"sourceType":"script"}},"rf9uI3VP2ADQ7ozThfktL0FHdkj44qSgB":{"idName":"rf9uI3VP2ADQ7ozThfktL0FHdkj44qSgB","variableNames":["activityToday"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"BinaryExpression","operator":">","left":{"type":"Identifier","name":"activityToday","isInCrumb":true},"right":{"type":"Literal","value":1,"raw":"1"}}}],"sourceType":"script"}}};
REDSTONE.VARTOCRUMBID = {"tasks":["rmEz87OzvXTKFx3JlLHV8Zxa7d7HrU8Wd"],"taskTitle":["rFATu8QeBh79W6HV66Cyll6ebFThbbaOh"],"taskPriority":["rRBnrNlajjgK9h8VjugIakPyx42k5RpSd"],"meetings":["rzFtE5rawHlFPsCAxKYqoYONpbtmKispQ"],"meetingTitle":["rswAsNvE5EVsT8QZVqiF8pjP7snrwXXor"],"meetingDate":["rVgSYugsT7rDGQ98WlqevHmGn2fKZtQoI"],"meetingNotes":["rbyXwYr75M6GqDhw8er1wiRzrsZsr1Up8"],"activityToday":["rjBdgwQPIjOwyn0pjeBAa8Th6RPYRityX","rh2vSxzmN8iUWniIox9FBpykilqf95iGJ","rf9uI3VP2ADQ7ozThfktL0FHdkj44qSgB"]};
REDSTONE.EXPOSEDVALUES  = [{"expression":"taskTitle","crumb":{"idName":"rFATu8QeBh79W6HV66Cyll6ebFThbbaOh","variableNames":["taskTitle"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"taskTitle","isInCrumb":true}}],"sourceType":"script"},"defaultValue":""},"onChangeEvent":false},{"expression":"taskPriority","crumb":{"idName":"rRBnrNlajjgK9h8VjugIakPyx42k5RpSd","variableNames":["taskPriority"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"taskPriority","isInCrumb":true}}],"sourceType":"script"},"defaultValue":""},"onChangeEvent":false},{"expression":"meetingTitle","crumb":{"idName":"rswAsNvE5EVsT8QZVqiF8pjP7snrwXXor","variableNames":["meetingTitle"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"meetingTitle","isInCrumb":true}}],"sourceType":"script"},"defaultValue":""},"onChangeEvent":false},{"expression":"meetingDate","crumb":{"idName":"rVgSYugsT7rDGQ98WlqevHmGn2fKZtQoI","variableNames":["meetingDate"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"meetingDate","isInCrumb":true}}],"sourceType":"script"},"defaultValue":""},"onChangeEvent":false},{"expression":"meetingNotes","crumb":{"idName":"rbyXwYr75M6GqDhw8er1wiRzrsZsr1Up8","variableNames":["meetingNotes"],"parsedExpression":{"type":"Program","body":[{"type":"ExpressionStatement","expression":{"type":"Identifier","name":"meetingNotes","isInCrumb":true}}],"sourceType":"script"},"defaultValue":""},"onChangeEvent":false}];
REDSTONE.EVENTS = [{"name":"displaySchedule","type":"click","idName":"ruk3rgSwL6NL4fwkhlcAcBUAz123KAzDu"},{"name":"createCharts","type":"click","idName":"rd82A4WITTRlHzX7nXMqBTyGSGhbn5Pbs"},{"name":"nextStatusTask","type":"click","idName":"rtWWETrjOufCgHMTKmGzYhz0aVmz5m3wC"},{"name":"addTask","type":"click","idName":"rAPXaa0FMEg8knNRslPBbXRA5bgSwZrG7"},{"name":"editMeeting","type":"click","idName":"rUUc2gdmfcluQ8ohDafOvxUFRSXSFsUJ3"},{"name":"addMeeting","type":"click","idName":"rBgq16xTm5VHt9u2VAi6UMTR0r5GmSvMp"}];

</script>
		<script src="js/client.js"></script>
		<script>$(document).ready(function() {
// --> Begin generated

REDSTONE.UPDATECLIENTVAR['taskTitle'] = function (newvalue) {
    taskTitle = newvalue;
};
REDSTONE.UPDATECLIENTVAR['taskPriority'] = function (newvalue) {
    taskPriority = newvalue;
};
REDSTONE.UPDATECLIENTVAR['meetingTitle'] = function (newvalue) {
    meetingTitle = newvalue;
};
REDSTONE.UPDATECLIENTVAR['meetingDate'] = function (newvalue) {
    meetingDate = newvalue;
};
REDSTONE.UPDATECLIENTVAR['meetingNotes'] = function (newvalue) {
    meetingNotes = newvalue;
};
REDSTONE.registerMethod("happenedInPast", happenedInPast);
REDSTONE.registerMethod("displaySchedule", displaySchedule);
REDSTONE.registerMethod("createCharts", createCharts);
REDSTONE.registerMethod("nextStatusTask", nextStatusTask);
REDSTONE.registerMethod("addTask", addTask);
REDSTONE.registerMethod("editMeeting", editMeeting);
REDSTONE.registerMethod("addMeeting", addMeeting);
REDSTONE.init();
// <-- End generated
});
</script>
		<link rel="stylesheet" type="text/css" href="css/loading.css">
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="css/font-awesome.min.css">
		<link rel="stylesheet" href="css/animate.css">
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css">
		<link rel="stylesheet" href="css/calendar.css">
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lobster">
		<script src="js/moment.js"></script>
		<script src="js/transition.js"></script>
		<script src="js/collapse.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/bootstrap-datetimepicker.js"></script>
		<script src="js/jquery.appear.js"></script>
		<script src="js/jqBootstrapValidation.js"></script>
		<script src="js/modernizr.custom.js"></script>
		<script src="js/highcharts.js"></script>
		<script src="js/highcharts-3d.js"></script>
		<script src="js/highcharts-more.js"></script>
		<script src="js/modules/exporting.js"></script>
		<script src="js/underscore-min.js"></script>
		<script src="js/calendar.js"></script>
	</head>
	<body>
		<div id="loading">
			<div class="loader"></div>
		</div>
		<div id="render-target"></div>
		<script type="text/ractive" id="main-template">
			<section class="text-center" id="logo-section">
				<div class="container">
					<div class="row">
						<div class="col-md-12">
							<div class="logo text-center">
								<h1>Uni-corn</h1>
								<span>Managing your uni-versity career</span>
							</div>
						</div>
					</div>
				</div>
			</section>
			<div class="mainbody-section text-center">
				<div class="container">
					<div class="row">
						<div class="col-md-3">
							<div class="menu-item blue">
								<a href="#calendar-modal" data-toggle="modal" on-click="ruk3rgSwL6NL4fwkhlcAcBUAz123KAzDu">
									<i class="fa fa-calendar"></i>
									<p>Schedule</p>
								</a>
							</div>
							<div class="menu-item green">
								<a href="#tasks-modal" data-toggle="modal">
									<i class="fa fa-tasks"></i>
									<p>Tasks</p>
								</a>
							</div>
						</div>
						<div class="col-md-6">
							<img src="images/unicorn.png" class="img-responsive">
						</div>
						<div class="col-md-3">
							<div class="menu-item light-red">
								<a href="#meetings-modal" data-toggle="modal">
									<i class="fa fa-envelope-o"></i>
									<p>Meetings</p>
								</a>
							</div>
							<div class="menu-item color">
								<a href="#progress-modal" data-toggle="modal" on-click="rd82A4WITTRlHzX7nXMqBTyGSGhbn5Pbs">
									<i class="fa fa-pie-chart"></i>
									<p>Progress</p>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="section-modal modal fade" tab-index="-1" role="dialog" aria-hidden="true" id="calendar-modal">
				<div class="modal-content">
					<div class="close-modal" data-dismiss="modal">
						<div class="lr">
							<div class="rl"></div>
						</div>
					</div>
					<div class="container">
						<div class="row">
							<div class="section-title text-center">
								<h3>Your Awesome Calendar</h3>
								<p>Always be yourself. Unless you can be a unicorn, then always be a unicorn.</p>
							</div>
						</div>
						<div class="row">
							<div class="pull-right form-inline">
								<div class="btn-group">
									<button class="btn btn-warning" data-calendar-view="year">Year</button>
									<button class="btn btn-warning" data-calendar-view="month">Month</button>
									<button class="btn btn-warning active" data-calendar-view="week">Week</button>
									<button class="btn btn-warning" data-calendar-view="day">Day</button>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="row">
								<div id="calendar"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="section-modal modal fade" tab-index="-1" role="dialog" aria-hidden="true" id="tasks-modal">
				<div class="modal-content">
					<div class="close-modal" data-dismiss="modal">
						<div class="lr">
							<div class="rl"></div>
						</div>
					</div>
					<div class="container">
						<div class="row">
							<div class="section-title text-center">
								<h3>Tasks</h3>
								<p>Being a person is getting too complicated. Time to be a unicorn.</p>
							</div>
						</div>
						<div class="row">
							<div class="col-md-8">
								<ul class="timeline">
																		{{#each rmEz87OzvXTKFx3JlLHV8Zxa7d7HrU8Wd:__idx__}}
										<li data-idx =" {{__idx__}}" class="{{status < 1 ? "timeline-inverted" : ""}}">
											{{#if status == 1}}
												<div class="timeline-badge info">
													<i class="glyphicon glyphicon-check"></i>
												</div>
											{{else}}
												{{#if status == 0}}
													<div class="timeline-badge warning">
														<i class="glyphicon glyphicon-edit"></i>
													</div>
												{{else}}
													<div class="timeline-badge danger">
														<i class="glyphicon glyphicon-road"></i>
													</div>
												{{/if}}

											{{/if}}

											<div class="timeline-panel">
												<div class="timeline-heading">
													<h4 class="timeline-title">
														{{title}}
													</h4>
												</div>
												<div class="timeline-body">
													<button class="btn btn-info btn-sm" on-click="rtWWETrjOufCgHMTKmGzYhz0aVmz5m3wC">
														<i class="glyphicon glyphicon-check"></i>
													</button>
												</div>
											</div>
										</li>									{{/each}}

								</ul>
							</div>
							<div class="col-md-4">
								<a class="btn btn-default">
									<span class="glyphicon glyphicon-pencil"></span>
								</a>
								<div class="form-horizontal" id="meeting-form">
									<div class="form-group">
										<label for="task-title" class="control-label sr-only">Title</label>
										<div class="col-sm-10">
											<input value="{{rFATu8QeBh79W6HV66Cyll6ebFThbbaOh}}" class="form-control" placeholder="Title">
										</div>
									</div>
									<div class="form-group">
										<label for="taskPriority" class="control-label sr-only">Priority</label>
										<div class="col-sm-10">
											<input value="{{rRBnrNlajjgK9h8VjugIakPyx42k5RpSd}}">
										</div>
									</div>
									<div class="form-group">
										<div class="col-sm-offset-2 col-sm-10">
											<button class="btn btn-success" id="send" on-click="rAPXaa0FMEg8knNRslPBbXRA5bgSwZrG7">
												<i class="glyphicon glyphicon-floppy-disk"></i>
											</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="section-modal modal fade" tab-index="-1" role="dialog" aria-hidden="true" id="meetings-modal">
				<div class="modal-content">
					<div class="close-modal" data-dismiss="modal">
						<div class="lr">
							<div class="rl"></div>
						</div>
					</div>
					<div class="container">
						<div class="row">
							<div class="section-title text-center">
								<h3>Meetings</h3>
								<p>Everything is better with a unicorn</p>
							</div>
						</div>
						<div class="row">
							<div class="col-md-8">
								<ul class="timeline">
																		{{#each rzFtE5rawHlFPsCAxKYqoYONpbtmKispQ:__idx__}}
										<li data-idx =" {{__idx__}}" class="{{happenedInPast(start) ? "timeline-inverted" : ""}}">
											{{#if happenedInPast(start)}}
												<div class="timeline-badge info">
													<i class="glyphicon glyphicon-check"></i>
												</div>
											{{else}}
												<div class="timeline-badge danger">
													<i class="glyphicon glyphicon-road"></i>
												</div>
											{{/if}}

											<div class="timeline-panel">
												<div class="timeline-heading">
													<h4 class="timeline-title">
														{{title}}
													</h4>
													<p>
														<small class="text-muted">
															{{start.toLocaleString()}}
														</small>
													</p>
												</div>
												<div class="timeline-body">
													<p>
														{{notes}}
													</p>
													<button class="btn btn-info btn-sm" on-click="rUUc2gdmfcluQ8ohDafOvxUFRSXSFsUJ3">
														<i class="glyphicon glyphicon-edit"></i>
													</button>
												</div>
											</div>
										</li>									{{/each}}

								</ul>
							</div>
							<div class="col-md-4">
								<a class="btn btn-default">
									<span class="glyphicon glyphicon-pencil"></span>
								</a>
								<div class="form-horizontal" id="meeting-form">
									<div class="form-group">
										<label for="meeting-title" class="control-label sr-only">Title</label>
										<div class="col-sm-10">
											<input value="{{rswAsNvE5EVsT8QZVqiF8pjP7snrwXXor}}" class="form-control" placeholder="Title">
										</div>
									</div>
									<div class="form-group">
										<div class="input-group date col-sm-8" style="padding-left:15px" id="meeting-starttime">
											<input type="text" class="form-control" value="{{rVgSYugsT7rDGQ98WlqevHmGn2fKZtQoI}}" id="meeting-start">
											<span class="input-group-addon">
												<span class="glyphicon glyphicon-calendar"></span>
											</span>
										</div>
									</div>
									<div class="form-group">
										<label for="meeting-description" class="control-label sr-only">Notes</label>
										<div class="col-sm-10">
											<textarea class="form-control" rows="3" value="{{rbyXwYr75M6GqDhw8er1wiRzrsZsr1Up8}}" id="meeting-description"></textarea>
										</div>
									</div>
									<div class="form-group">
										<div class="col-sm-offset-2 col-sm-10">
											<button class="btn btn-success" id="send" on-click="rBgq16xTm5VHt9u2VAi6UMTR0r5GmSvMp">
												<i class="glyphicon glyphicon-floppy-disk"></i>
											</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="section-modal modal fade" tab-index="-1" role="dialog" aria-hidden="true" id="progress-modal">
				<div class="modal-content">
					<div class="close-modal" data-dismiss="modal">
						<div class="lr">
							<div class="rl"></div>
						</div>
					</div>
					<div class="container">
						<div class="row">
							<div class="section-title text-center">
								<h3>Progress</h3>
								<p>If someone says you're not a unicorn don't talk to them. You do not need that kind of negativity in your life.</p>
							</div>
						</div>
						<div class="row">
							<div class="text-center col-md-4 col-md-offset-4">
																{{#if rf9uI3VP2ADQ7ozThfktL0FHdkj44qSgB}}
									<h4>
										You updated {{rjBdgwQPIjOwyn0pjeBAa8Th6RPYRityX}} tasks today! Quite the busy bee! Ehm, unicorn!
									</h4>
								{{else}}
									<h4>
										You updated {{rh2vSxzmN8iUWniIox9FBpykilqf95iGJ}} tasks today. You may have stopped believing in unicorns, but they never stopped believing in you!
									</h4>
								{{/if}}

							</div>
							<div class="col-md-5" id="chartscontainer"></div>
							<div class="col-md-5" id="chartmeetingcontainer"></div>
						</div>
					</div>
				</div>
			</div>
			<script src="js/aux.js"></script>
		</script>
		<script>
var ractive = new Ractive({
    el: '#render-target',
    template: '#main-template',
    data: {
        rmEz87OzvXTKFx3JlLHV8Zxa7d7HrU8Wd: undefined,
        rFATu8QeBh79W6HV66Cyll6ebFThbbaOh: '',
        rRBnrNlajjgK9h8VjugIakPyx42k5RpSd: '',
        rzFtE5rawHlFPsCAxKYqoYONpbtmKispQ: undefined,
        rswAsNvE5EVsT8QZVqiF8pjP7snrwXXor: '',
        rVgSYugsT7rDGQ98WlqevHmGn2fKZtQoI: '',
        rbyXwYr75M6GqDhw8er1wiRzrsZsr1Up8: '',
        rjBdgwQPIjOwyn0pjeBAa8Th6RPYRityX: undefined,
        rh2vSxzmN8iUWniIox9FBpykilqf95iGJ: undefined,
        rf9uI3VP2ADQ7ozThfktL0FHdkj44qSgB: undefined,
        happenedInPast: happenedInPast
    }
});
</script>
	</body>

</html>
<!--
/* @server */
{
	/* @replicated */
	var meetings = [];
	/* @replicated */
	var tasks = [];
	/* @replicated */
	var courses = [];

    var coursesJSON = [
        {
            title: "Structuur 1 Exam",
            start: "January 10, 2017 09:00:00",
            end: "January 10, 2017 13:00:00"
        },
        {
            title: "Structuur 1 Oral exam",
            start: "January 12, 2017 10:00:00",
            end: "January 12, 2017 18:00:00"
        },
        {
            title: "Structuur 1 Oral exam",
            start: "January 15, 2017 10:00:00",
            end: "January 15, 2017 18:00:00"
        }
    ];

	/* @replicated */
	function Meeting(title, notes, time) {
		this.title = title;
		this.notes = notes;
		this.start = new Date(time).getTime();
		this.end = new Date(this.start + (2 * 60 * 60 * 1000));
	}

	/* @replicated */
	function Task(title, priority) {
		this.title = title;
		this.status = -1;
		this.priority = priority;
	}

	/* @replicated */
	function Course(title, start, end) {
		this.title = title;
		this.start = new Date(start).getTime();
		this.end = new Date(end).getTime();
	}

	tasks.push(new Task("Learn uni-corn!"));
	coursesJSON.forEach(function (json) {
		var course = new Course(json.title, json.start, json.end);
		courses.push(course);
	})

}

/* @client */
{
	var meetingTitle = "";
	var meetingDate  = "";
	var meetingNotes = "";
	var currentlyEditingM = "";
	var taskTitle = "";
	var taskPriority = "";
	var activityToday = 0;
	var latestUpdate = false;

	function updateActivity () {
		function happenedToday(date1, date2) {
			var year1 = date1.getFullYear();
			var year2 = date2.getFullYear();
			var month2 = date2.getMonth();
			var month1 = date1.getMonth();
			var day1 = date1.getDay();
			var day2 = date2.getDay();
			return year1 == year2 && month1 == month2 && day1 == day2;
		}
		var now = new Date();
		if (latestUpdate) {
			if (happenedToday(latestUpdate, now)) {
				activityToday = activityToday + 1;
				latestUpdate = now;
			} else {
				activityToday = 1;
				latestUpdate = now;
			}

		} else {
			latestUpdate = now;
			activityToday = activityToday + 1;
		}

	}

	function addMeeting() {
		if (currentlyEditingM) {
			currentlyEditingM.title = meetingTitle;
			currentlyEditingM.start = meetingDate;
			currentlyEditingM.notes = meetingNotes;
			currentlyEditingM = false;
		} else {
			meetings.push(new Meeting(meetingTitle, meetingNotes, meetingDate));
		}
		meetings.sort(function (m1, m2) {
			var first = m1.start;
			var second = m2.start;
			return first - second;
		})
		meetingTitle = "";
		meetingDate = "";
		meetingNotes = "";
	}

	function addTask() {
		tasks.push(new Task(taskTitle, taskPriority));
		tasks.sort(function (t1, t2) {
			if (t1.status == t2.status) {
				return t1.priority - t2.priority;
			} else {
				return t1.status - t2.status;
			}
		})
		taskTitle = "";
		taskPriority = "";
	}

	function happenedInPast(date1) {
		var now = new Date().getTime();
		return date1 < now;
	}


	function editMeeting(ev) {
		var idx = ev.index;
		currentlyEditingM = meetings[idx];
		var dateS = currentlyEditingM.start;
		meetingTitle = currentlyEditingM.title;
		meetingNotes = currentlyEditingM.notes;
		meetingDate = new Date(dateS);
	}


	function nextStatusTask (ev) {
		var idx = ev.index;
		var task = tasks[idx];
		var now = new Date();
		if (task.status < 1) {
            task.status = task.status + 1;
            task.lastUpdate = now.getTime();
        }
        updateActivity();
	}

	function createTaskChart () {
        var finished = {name: 'finished', y: 0};
        var todo = {name: 'to start', y: 0};
        var inprogress = {name: 'in progress', y: 0};
        tasks.forEach(function (task) {
            if (task.status < 0) {
                todo.y = todo.y + 1;
            }
            else if (task.status > 0) {
                finished.y = finished.y + 1;
            }
            else {
                inprogress.y = inprogress.y + 1;
            }
        })
        var chart = {
            chart: {type: 'pie', options3d: {
                enabled: true,
                alpha: 45
            }},
            title: {text: 'Tasks'},
            plotOptions: { pie: { innerSize: 100, depth: 45 }},
            colors: ['#249AA7', '#ABD25E', '#F1594A', '#F8C830'],
            series: [{
                name: 'Tasks',
                data: [finished, todo, inprogress]
            }]
        }
        $("#chartscontainer").highcharts(chart);
	}
	function createMeetingChart() {
        var currYear = new Date().getFullYear();
        var options = Highcharts.getOptions();
        var months = [0,0,0,0,0,0,0,0,0,0,0,0];
        meetings.forEach(function (meeting) {
            var date = new Date(meeting.start);
            var month = date.getMonth();
            var year = date.getFullYear();
            if (year == currYear)
            	months[month] = months[month] + 1;
        });
        var chart =  {
            chart: {type:'column', options3d: {enabled:true, alpha:10, beta:25, depth:70} },
            title: {text: 'Meetings this year'},
            colors: ['#249AA7', '#ABD25E', '#F1594A', '#F8C830'],
            plotOptions: {column: {depth: 25}},
            xAxis: {categories: options.lang.shortMonths},
            yAxis: { title: { text: null}},
            series: [{
                name: 'Meetings',
                data: months
            }]
        }
        $("#chartmeetingcontainer").highcharts(chart);
	}

	function createCharts() {
		createTaskChart();
		createMeetingChart();
	}

	function displaySchedule() {
		var schedule = meetings.concat(courses);
		schedule.forEach(function (appointment) {
			appointment.class= "event-info";
		})
		var calendar = $("#calendar").calendar({
			tmpl_path : "tmpls/",
			view : "week",
			events_source: schedule
		});
		calendar.view();

	}
}

/* @ui */
head
	title Uni-corn
	link[rel=stylesheet][href=css/bootstrap.min.css]
	link[rel=stylesheet][href=css/bootstrap-theme.min.css]
	link[rel=stylesheet][href=css/font-awesome.min.css]
	link[rel=stylesheet][href=css/animate.css]
	link[rel=stylesheet][href=css/style.css]
	link[rel=stylesheet][href=css/bootstrap-datetimepicker.min.css]
	link[rel=stylesheet][href=css/calendar.css]
	link[rel=stylesheet][href=http://fonts.googleapis.com/css?family=Lobster]
	script[src=js/moment.js]
	script[src=js/transition.js]
	script[src=js/collapse.js]
	script[src=js/bootstrap.min.js]
	script[src=js/bootstrap-datetimepicker.js]
	script[src=js/jquery.appear.js]
	script[src=js/jqBootstrapValidation.js]
	script[src=js/modernizr.custom.js]
	script[src=js/highcharts.js]
	script[src=js/highcharts-3d.js]
	script[src=js/highcharts-more.js]
	script[src=js/modules/exporting.js]
	script[src=js/underscore-min.js]
	script[src=js/calendar.js]
body

	section#logo-section[class=text-center]
		div[class=container]
			div[class=row]
				div[class=col-md-12]
					div[class=logo text-center]
						h1 Uni-corn
						span Managing your uni-versity career
	div[class=mainbody-section text-center]
		div[class=container]
			div[class=row]
				div[class=col-md-3]
					div[class=menu-item blue]
						a[href=#calendar-modal][data-toggle=modal][@click=displaySchedule]
							i[class=fa fa-calendar]
							p Schedule
					div[class=menu-item green]
						a[href=#tasks-modal][data-toggle=modal]
							i[class=fa fa-tasks]
							p Tasks
				div[class=col-md-6]
					img[src=images/unicorn.png][class=img-responsive]
				div[class=col-md-3]
					div[class=menu-item light-red]
						a[href=#meetings-modal][data-toggle=modal]
							i[class=fa fa-envelope-o]
							p Meetings
					div[class=menu-item color]
						a[href=#progress-modal][data-toggle=modal][@click=createCharts]
							i[class=fa fa-pie-chart]
							p Progress

	div#calendar-modal[class=section-modal modal fade][tab-index=-1][role=dialog][aria-hidden=true]
		div[class=modal-content]
			div[class=close-modal][data-dismiss=modal]
				div[class=lr]
					div[class=rl]
			div[class=container]
				div[class=row]
					div[class=section-title text-center]
						h3 Your Awesome Calendar
						p Always be yourself. Unless you can be a unicorn, then always be a unicorn.
				div[class=row]
					div[class=pull-right form-inline]
						div[class=btn-group]
							button[class=btn btn-warning][data-calendar-view=year] Year
							button[class=btn btn-warning][data-calendar-view=month] Month
							button[class=btn btn-warning active][data-calendar-view=week] Week
							button[class=btn btn-warning][data-calendar-view=day] Day
				div[class=row]
					div[class=row]
						div#calendar
	div#tasks-modal[class=section-modal modal fade][tab-index=-1][role=dialog][aria-hidden=true]
		div[class=modal-content]
			div[class=close-modal][data-dismiss=modal]
				div[class=lr]
					div[class=rl]
			div[class=container]
				div[class=row]
					div[class=section-title text-center]
						h3 Tasks
						p Being a person is getting too complicated. Time to be a unicorn.
				div[class=row]
					div[class=col-md-8]
						ul[class=timeline]
							{{#each tasks}}
								li[data-idx = {{__idx__}}][class={{status < 1 ? "timeline-inverted" : ""}}]
									{{#if status == 1}}
										div[class=timeline-badge info]
											i[class=glyphicon glyphicon-check]
									{{#else}}
										{{#if status == 0}}
											div[class=timeline-badge warning]
												i[class=glyphicon glyphicon-edit]
										{{#else}}
											div[class=timeline-badge danger]
												i[class=glyphicon glyphicon-road]
									div[class=timeline-panel]
										div[class=timeline-heading]
											h4[class=timeline-title] {{title}}

										div[class=timeline-body]
											button[@click=nextStatusTask][class=btn btn-info btn-sm]
												i[class=glyphicon glyphicon-check]


					div[class=col-md-4]
						a[class=btn btn-default]
							span[class=glyphicon glyphicon-pencil]
						div#meeting-form[class=form-horizontal]
							div[class=form-group]
								label[for=task-title][class=control-label sr-only] Title
								div[class=col-sm-10]
									input[value={{taskTitle}}][class=form-control][placeholder=Title]
							div[class=form-group]
								label[for=taskPriority][class=control-label sr-only] Priority
								div[class=col-sm-10]
									input[value={{taskPriority}}]
							div[class=form-group]
								div[class=col-sm-offset-2 col-sm-10]
									button[@click=addTask][class=btn btn-success]#send
										i[class=glyphicon glyphicon-floppy-disk]

	div#meetings-modal[class=section-modal modal fade][tab-index=-1][role=dialog][aria-hidden=true]
		div[class=modal-content]
			div[class=close-modal][data-dismiss=modal]
				div[class=lr]
					div[class=rl]
			div[class=container]
				div[class=row]
					div[class=section-title text-center]
						h3 Meetings
						p Everything is better with a unicorn
				div[class=row]
					div[class=col-md-8]
						ul[class=timeline]
							{{#each meetings}}
								li[data-idx = {{__idx__}}][class={{happenedInPast(start) ? "timeline-inverted" : ""}}]
									{{#if happenedInPast(start)}}
										div[class=timeline-badge info]
											i[class=glyphicon glyphicon-check]
									{{#else}}
										div[class=timeline-badge danger]
											i[class=glyphicon glyphicon-road]
									div[class=timeline-panel]
										div[class=timeline-heading]
											h4[class=timeline-title] {{title}}
											p
												small[class=text-muted] {{start.toLocaleString()}}
										div[class=timeline-body]
											p {{notes}}
											button[@click=editMeeting][class=btn btn-info btn-sm]
												i[class=glyphicon glyphicon-edit]


					div[class=col-md-4]
						a[class=btn btn-default]
							span[class=glyphicon glyphicon-pencil]
						div#meeting-form[class=form-horizontal]
							div[class=form-group]
								label[for=meeting-title][class=control-label sr-only] Title
								div[class=col-sm-10]
									input[value={{meetingTitle}}][class=form-control][placeholder=Title]
							div[class=form-group]
								div#meeting-starttime[class=input-group date col-sm-8][style=padding-left:15px]
									input#meeting-start[type=text][class=form-control][value={{meetingDate}}]
									span[class=input-group-addon]
										span[class=glyphicon glyphicon-calendar]
							div[class=form-group]
								label[for=meeting-description][class=control-label sr-only] Notes
								div[class=col-sm-10]
									textarea#meeting-description[class=form-control][rows=3][value={{meetingNotes}}]
							div[class=form-group]
								div[class=col-sm-offset-2 col-sm-10]
									button[@click=addMeeting][class=btn btn-success]#send
										i[class=glyphicon glyphicon-floppy-disk]

	div#progress-modal[class=section-modal modal fade][tab-index=-1][role=dialog][aria-hidden=true]
		div[class=modal-content]
			div[class=close-modal][data-dismiss=modal]
				div[class=lr]
					div[class=rl]
			div[class=container]
				div[class=row]
					div[class=section-title text-center]
						h3 Progress
						p If someone says you're not a unicorn don't talk to them. You do not need that kind of negativity in your life.
				div[class=row]
					div[class=text-center col-md-4 col-md-offset-4]
						{{#if activityToday > 1}}
							h4 You updated {{activityToday}} tasks today! Quite the busy bee! Ehm, unicorn!
						{{#else}}
							h4 You updated {{activityToday}} tasks today. You may have stopped believing in unicorns, but they never stopped believing in you!
					div#chartscontainer[class=col-md-5]
					div#chartmeetingcontainer[class=col-md-5]

	script[src=js/aux.js]
-->
